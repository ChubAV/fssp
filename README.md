# FSSP - –°–µ—Ä–≤–∏—Å –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞—Ö –Ω–∞ —Å–∞–π—Ç–µ [fssp.gov.ru](https://fssp.gov.ru/).

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîç –ü–æ–∏—Å–∫ –ø–æ —Ç—Ä–µ–º —Ç–∏–ø–∞–º –¥–∞–Ω–Ω—ã—Ö:
  - –ü–æ –Ω–æ–º–µ—Ä—É –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ (–ò–ü)
  - –ü–æ –§–ò–û –∏ –¥–∞—Ç–µ —Ä–æ–∂–¥–µ–Ω–∏—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –ª–∏—Ü–∞
  - –ü–æ –ò–ù–ù —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–≥–æ –ª–∏—Ü–∞
- ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∫–∞–ø—á–∏ —á–µ—Ä–µ–∑ RuCaptcha
- üåê REST API –Ω–∞ –±–∞–∑–µ FastAPI
- üíª CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∫—Ä–∞—Å–∏–≤—ã–º –≤—ã–≤–æ–¥–æ–º
- üìä –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—ã–≤–æ–¥–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö: —Ç–∞–±–ª–∏—Ü–∞ (human) –∏ JSON

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.13+**
- **FastAPI** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è API
- **Playwright** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
- **RuCaptcha** - —Ä–µ—à–µ–Ω–∏–µ –∫–∞–ø—á–∏
- **Pydantic** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **Typer** - CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **Rich** - –∫—Ä–∞—Å–∏–≤–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞
- **Structlog** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.13 –∏–ª–∏ –≤—ã—à–µ
- [uv](https://github.com/astral-sh/uv) - –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤
- [just](https://github.com/casey/just) - –∫–æ–º–∞–Ω–¥–æ-—Ä–∞–Ω–Ω–µ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repository-url>
cd fssp
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
uv sync
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä—ã –¥–ª—è Playwright:
```bash
uv run playwright install chromium
```

4. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
RUCAPTCH_API_KEY=your_rucaptcha_api_key_here
DEBUG=false
HOST=0.0.0.0
PORT=8000
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–µ `.env`:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `RUCAPTCH_API_KEY` | API –∫–ª—é—á –¥–ª—è RuCaptcha (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) | - |
| `DEBUG` | –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ | `false` |
| `HOST` | –•–æ—Å—Ç –¥–ª—è HTTP —Å–µ—Ä–≤–µ—Ä–∞ | `0.0.0.0` |
| `PORT` | –ü–æ—Ä—Ç –¥–ª—è HTTP —Å–µ—Ä–≤–µ—Ä–∞ | `8000` |

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

#### –ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É –ò–ü

```bash
just cli ip --ip-number "1234567/12/34/56"
```

–ò–ª–∏ —Å JSON –≤—ã–≤–æ–¥–æ–º:
```bash
just cli ip --ip-number "1234567/12/34/56" --format json
```

#### –ü–æ–∏—Å–∫ –ø–æ –§–ò–û –∏ –¥–∞—Ç–µ —Ä–æ–∂–¥–µ–Ω–∏—è

```bash
just cli person --last-name "–ò–≤–∞–Ω–æ–≤" --first-name "–ò–≤–∞–Ω" --birthday "16.05.1992"
```

–° –æ—Ç—á–µ—Å—Ç–≤–æ–º:
```bash
just cli person --last-name "–ò–≤–∞–Ω–æ–≤" --first-name "–ò–≤–∞–Ω" --patronymic "–ò–≤–∞–Ω–æ–≤–∏—á" --birthday "16.05.1992"
```

#### –ü–æ–∏—Å–∫ –ø–æ –ò–ù–ù

```bash
just cli inn --inn "1234567890"
```

### HTTP API

#### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º):
```bash
just dev
```

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
```bash
just run
```

–ò–ª–∏ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
```bash
just dev HOST=127.0.0.1 PORT=8080
```

#### API Endpoints

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8000`.

**Healthcheck:**
```bash
curl http://localhost:8000/healthcheck
```

**–ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É –ò–ü:**
```bash
curl -X POST http://localhost:8000/ip \
  -H "Content-Type: application/json" \
  -d '{"ip": "1234567/12/34/56"}'
```

**–ü–æ–∏—Å–∫ –ø–æ –§–ò–û:**
```bash
curl -X POST http://localhost:8000/person \
  -H "Content-Type: application/json" \
  -d '{
    "last_name": "–ò–≤–∞–Ω–æ–≤",
    "first_name": "–ò–≤–∞–Ω",
    "patronymic": "–ò–≤–∞–Ω–æ–≤–∏—á",
    "birthday": "16.05.1992"
  }'
```

**–ü–æ–∏—Å–∫ –ø–æ –ò–ù–ù:**
```bash
curl -X POST http://localhost:8000/inn \
  -H "Content-Type: application/json" \
  -d '{"inn": "1234567890"}'
```

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
fssp/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ application/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ fssp_service.py   # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ domain/               # –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py         # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ errors.py         # –î–æ–º–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ infrastructure/       # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π —Å–ª–æ–π
‚îÇ       ‚îú‚îÄ‚îÄ captcha.py        # –†–µ—à–µ–Ω–∏–µ –∫–∞–ø—á–∏
‚îÇ       ‚îú‚îÄ‚îÄ cli.py            # CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ       ‚îú‚îÄ‚îÄ config.py         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ fssp_client.py    # –ö–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –§–°–°–ü
‚îÇ       ‚îú‚îÄ‚îÄ parser.py         # –ü–∞—Ä—Å–∏–Ω–≥ HTML
‚îÇ       ‚îú‚îÄ‚îÄ logging.py        # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ http/             # HTTP —Å–ª–æ–π
‚îÇ           ‚îú‚îÄ‚îÄ api.py        # API —Ä–æ—É—Ç—ã
‚îÇ           ‚îú‚îÄ‚îÄ app.py        # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ           ‚îú‚îÄ‚îÄ dependencies.py # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ           ‚îî‚îÄ‚îÄ schemas/      # HTTP —Å—Ö–µ–º—ã
‚îú‚îÄ‚îÄ logs/                     # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ temp/                     # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (—Å–∫—Ä–∏–Ω—à–æ—Ç—ã, –∫–∞–ø—á–∏)
‚îú‚îÄ‚îÄ main.py                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ pyproject.toml            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ justfile                  # –ö–æ–º–∞–Ω–¥—ã –¥–ª—è just
‚îî‚îÄ‚îÄ README.md                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö

### –ù–æ–º–µ—Ä –ò–ü
–§–æ—Ä–º–∞—Ç: `1234567/12/34/56` –∏–ª–∏ `1234567/12/34/56-–ò–ü`

### –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
–§–æ—Ä–º–∞—Ç: `DD.MM.YYYY` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `16.05.1992`)

### –ò–ù–ù
- –î–ª—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü: 12 —Ü–∏—Ñ—Ä
- –î–ª—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü: 10 —Ü–∏—Ñ—Ä

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–°–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫:

- `CaptchaError` - –æ—à–∏–±–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∫–∞–ø—á–∏
- `CaptchaLimitExceeded` - –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –ø–æ–ø—ã—Ç–æ–∫ –≤–≤–æ–¥–∞ –∫–∞–ø—á–∏
- `FsspUnavailable` - –§–°–°–ü –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç
- `ParsingError` - –æ—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML –æ—Ç–≤–µ—Ç–∞
- `ValidationError` - –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª `logs/main.log` —Å —Ä–æ—Ç–∞—Ü–∏–µ–π:
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 5 –ú–ë
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π: 3

–£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `DEBUG`:
- `DEBUG=true` ‚Üí —É—Ä–æ–≤–µ–Ω—å `DEBUG`
- `DEBUG=false` ‚Üí —É—Ä–æ–≤–µ–Ω—å `INFO`

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
just dev
```

### –ó–∞–ø—É—Å–∫ CLI

```bash
just cli ip --ip-number "1234567/12/34/56"
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º Clean Architecture:
- **Domain** - –¥–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- **Application** - —Å–µ—Ä–≤–∏—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Infrastructure** - –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (HTTP, –±—Ä–∞—É–∑–µ—Ä, –ø–∞—Ä—Å–∏–Ω–≥)

## –õ–∏—Ü–µ–Ω–∑–∏—è

[–£–∫–∞–∂–∏—Ç–µ –ª–∏—Ü–µ–Ω–∑–∏—é –ø—Ä–æ–µ–∫—Ç–∞]

## –ê–≤—Ç–æ—Ä

[–£–∫–∞–∂–∏—Ç–µ –∞–≤—Ç–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞]
